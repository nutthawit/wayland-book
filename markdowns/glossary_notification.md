# Notification

## In `wl_seat` context

A "notification in seat" refers to an event that the Wayland compositor sends to the client via the wl_seat object, typically to inform the client about changes in the available input capabilities.

The two main notifications (events) a client will receive from a wl_seat object are:

1. capabilities Event

This is the most crucial notification.

    What it means: The compositor is informing the client about which types of input devices are currently active and available to that seat.

    When it's sent: When the client first binds to the wl_seat global, and any time an input device is hot-plugged or unplugged (e.g., plugging in a USB mouse or keyboard).

    Action for the Client: The client receives a bitmask of capabilities. Based on this mask, the client can then make specific requests to the wl_seat to get the actual input objects:

        If Pointer capability is set, the client can request a wl_pointer object to receive mouse/trackpad events.

        If Keyboard capability is set, the client can request a wl_keyboard object to receive key events.

        If Touch capability is set, the client can request a wl_touch object to receive touchscreen events.

2. name Event

This notification provides identification for the seat.

    What it means: The compositor is providing a unique name for the seat object.

    When it's sent: Immediately after binding to the seat global, and before the capabilities event.

    Purpose: In multi-seat configurations (where one machine is used by multiple simultaneous users, each with their own set of input devices and display), the unique name helps clients distinguish which physical devices a specific seat represents. For a typical desktop setup, there is usually just one named seat.

## In `wl_pointer` context

The Wayland protocol is message-based, and a **"notification"** from a Wayland server to a client is officially called an **event**.

In the context of the **`wl_pointer`** interface (which represents the mouse, touchpad, or other pointer devices), a notification (event) is any message the **compositor (server)** sends to the **client application** to report pointer-related activity.

Here are the main **events (notifications)** generated by the `wl_pointer` object:

**Core Pointer Events**

| Event Name | Meaning | Details |
| :--- | :--- | :--- |
| **`enter`** | **Focus gained.** | The pointer has moved into the client's surface. This event provides the initial coordinates (`surface_x`, `surface_y`) and a **serial** number, which the client uses to set the cursor image. |
| **`leave`** | **Focus lost.** | The pointer has moved out of the client's surface. |
| **`motion`** | **Movement.** | The pointer has moved over the focused surface. It provides the new coordinates (`surface_x`, `surface_y`) relative to the surface's origin. |
| **`button`** | **Button press/release.** | A mouse button was pressed or released (e.g., left-click, right-click). It includes the **serial**, a timestamp, the button code (e.g., `BTN_LEFT`), and the state (`pressed` or `released`). |
| **`axis`** | **Scroll/Axis motion.** | An axis has moved, most commonly used for scrolling (vertical or horizontal) via a scroll wheel or touchpad gesture. The value parameter is a relative movement along the specified axis. |

**Event Grouping**

All of the pointer events that logically belong together—for example, a simultaneous vertical and horizontal scroll input—are bundled by a final event called **`frame`**.

**`frame` Event:** Signals the **end of a logically related group of events** (like a single physical scroll action). Clients are expected to **accumulate** the data from all preceding events (motion, button, axis) before processing the entire group together once the `frame` event is received.

**Conceptual Simulation of Wayland Event Grouping**

The Wayland protocol is designed to deliver a complete, atomic "snapshot" of input state for every logical input action, which is achieved through event grouping using the wl_pointer.frame event.

Scenario: Diagonal Scroll on a Touchpad

>[!NOTE]
> Diagonal scroll in action https://www.youtube.com/watch?v=rKIpkgDzSyw

Imagine a user performs a diagonal scrolling gesture on a touchpad, moving their fingers both horizontally and vertically at the same time. The operating system and Wayland compositor treat this as a single input action.

| Time (t)  | Event Sent to Client  | Parameters / Data | Client's Action Before frame |
|-----------|-----------------------|-------------------|------------------------------|
|t0         |wl_pointer.axis_source |Source=finger      |Notes that the input is from a finger.|
|t1         |wl_pointer.axis	    |Axis=vertical,Value=15.0 |Accumulates a vertical scroll delta of 15.0.|
|t2         |wl_pointer.axis        |Axis=horizontal,Value=10.0	|Accumulates a horizontal scroll delta of 10.0.|
|t3         |wl_pointer.frame       |(No data)          |Processes all accumulated data.|

